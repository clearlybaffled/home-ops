#
# Ansible managed
#
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: services
generators:
- ./secret-generator.yaml
helmCharts:
- name: nextcloud
  repo: https://nextcloud.github.io/helm/
  version: 4.6.4
  namespace: services
  apiVersions:
  - v1
  - apiregistration.k8s.io/v1
  - apps/v1
  - events.k8s.io/v1
  - authentication.k8s.io/v1
  - authorization.k8s.io/v1
  - autoscaling/v2
  - autoscaling/v1
  - batch/v1
  - certificates.k8s.io/v1
  - networking.k8s.io/v1
  - policy/v1
  - rbac.authorization.k8s.io/v1
  - storage.k8s.io/v1
  - admissionregistration.k8s.io/v1
  - apiextensions.k8s.io/v1
  - scheduling.k8s.io/v1
  - coordination.k8s.io/v1
  - node.k8s.io/v1
  - discovery.k8s.io/v1
  - flowcontrol.apiserver.k8s.io/v1
  - flowcontrol.apiserver.k8s.io/v1beta3
  - acme.cert-manager.io/v1
  - cert-manager.io/v1
  - monitoring.coreos.com/v1
  - monitoring.coreos.com/v1alpha1
  - postgresql.cnpg.io/v1
  - argoproj.io/v1alpha1
  - metallb.io/v1beta2
  - metallb.io/v1beta1
  - metallb.io/v1alpha1
  - k8s.keycloak.org/v2alpha1
  - metrics.k8s.io/v1beta1
  releaseName: nextcloud
  valuesFile: values.yaml
patchesStrategicMerge:
- "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nextcloud-metrics\nspec:\n
  \ template:\n    spec:\n      containers:\n        - name: metrics-exporter\n          env:\n
  \           - name: NEXTCLOUD_SERVER\n              value: \"http://nextcloud.services.svc:8080\""
resources:
- ./storage.yaml
