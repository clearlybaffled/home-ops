controllers:
  main:
    containers:
      main:
        image:
          repository: lscr.io/linuxserver/daapd
          tag: 28.8-ls129
        env:
          TZ: America/New_York
          PGID: 997
          PUID: 997
        resources:
          requests:
            cpu: 50m
            memory: 250Mi
          limits:
            memory: 2000Mi

service:
  main:
    ports:
      http:
        port: 3689

ingress:
  main:
    enabled: true
    className: nginx
    annotations:
      gethomepage.dev/enabled: "true"
      gethomepage.dev/description: Open Source DAAP Server
      gethomepage.dev/group: Media
      gethomepage.dev/icon: lidarr.png
      gethomepage.dev/name: Owntone
    hosts:
      - host: &host daap.hermleigh.home
        paths:
          - path: /
            pathType: Prefix
            service:
              name: main
              port: http
    tls:
      - hosts:
          - *host
        secretName: owntone-ingress-tls

persistence:
  config:
    size: 1Gi
    type: persistentVolumeClaim
    storageClass: ceph-fs-ssd
    enabled: true
    globalMounts:
      - path: /config
  music:
    enabled: true
    existingClaim: shared-files
    globalMounts:
      - path: /music
        subPath: Music
